<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yinxt.surveyscale.mapper.QuestionMapper">
    <resultMap id="questionResultMap" type="com.yinxt.surveyscale.pojo.Question">
        <result column="question_id" property="questionId"/>
        <result column="scale_id" property="scaleId"/>
        <result column="question_type" property="questionType"/>
        <result column="title" property="title"/>
        <result column="item_01" property="item_01"/>
        <result column="item_02" property="item_02"/>
        <result column="item_03" property="item_03"/>
        <result column="item_04" property="item_04"/>
        <result column="item_05" property="item_05"/>
        <result column="item_06" property="item_06"/>
        <result column="attachment" property="attachment"/>
        <result column="status" property="status"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
    </resultMap>

    <select id="selectQuestionList" resultMap="questionResultMap">
        select *
        from tb_question
        where scale_id=#{scaleId,jdbcType=VARCHAR}
    </select>

    <select id="selectQuestion" resultMap="questionResultMap">
        select *
        from tb_question
        where question_id=#{questionId,jdbcType=VARCHAR}
    </select>

    <insert id="insertQuestion" parameterType="com.yinxt.surveyscale.pojo.Question">
        insert into
        tb_question
        (question_id, scale_id, question_type, title, item_01, item_02, item_03, item_04, item_05, item_06, attachment,
        create_time)
        values (
        #{questionId,jdbcType=VARCHAR}, #{scaleId,jdbcType=VARCHAR},#{questionType,jdbcType=VARCHAR}, #{title,jdbcType=VARCHAR},
        #{item_01,jdbcType=VARCHAR}, #{item_02,jdbcType=VARCHAR}, #{item_03,jdbcType=VARCHAR},
        #{item_04,jdbcType=VARCHAR}, #{item_05,jdbcType=VARCHAR}, #{item_06}, #{attachment,jdbcType=VARCHAR},
        now()
        )
    </insert>

    <update id="updateQuestion">
        update tb_question
        <set>
            <trim suffixOverrides=",">
                <if test="questionType != null">
                    question_type=#{questionType,jdbcType=VARCHAR},
                </if>
                <if test="title != null">
                    title=#{title,jdbcType=VARCHAR},
                </if>
                <if test="item_01 != null">
                    item_01=#{item_01,jdbcType=VARCHAR},
                </if>
                <if test="item_02 != null">
                    item_02=#{item_02,jdbcType=VARCHAR},
                </if>
                <if test="item_03 != null">
                    item_03=#{item_03,jdbcType=VARCHAR},
                </if>
                <if test="item_04 != null">
                    item_04=#{item_04,jdbcType=VARCHAR},
                </if>
                <if test="item_05 != null">
                    item_05=#{item_05,jdbcType=VARCHAR},
                </if>
                <if test="item_06 != null">
                    item_06=#{item_06,jdbcType=VARCHAR},
                </if>
                <if test="attachment != null">
                    attachment=#{attachment,jdbcType=VARCHAR},
                </if>
                <if test="status != null">
                    status=#{status,jdbcType=VARCHAR},
                </if>
                update_time=now(),
            </trim>
        </set>
        <where>
            <if test="questionId !=null and questionId != ''">
                question_id=#{questionId,jdbcType=VARCHAR}
            </if>
            <if test="scaleId != null and scaleId != ''">
                and scale_id=#{scaleId,jdbcType=VARCHAR}
            </if>
        </where>
    </update>

</mapper>

